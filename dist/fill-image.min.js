/**
 * fill-image - An Angular directive that generate placeholder images from existing services like placehold.it, dummyimage.com, etc.
 * @version v0.1.0
 * @link https://github.com/arvindr21/fill-image#readme
 * @author Arvind Ravulavaru
 * @license MIT
 */

"use strict";angular.module("FillImage",[]).run(["$templateCache",function(e){e.put("fill-image.html","<img ng-src='{{imgUrl}}'>")}]).directive("fillImage",["Utils","RulesEngine",function(e,i){var r,l,t,a,n,c,o,p,s,u;return{restrict:"E",templateUrl:"fill-image.html",scope:{service:"=",size:"@size",format:"=",text:"@text",bgColor:"@bgColor",textColor:"="},link:function(m,f,g){if(l=g.service,a=g.size,t=g.format,n=g.text,c=g.bgColor,o=g.textColor,p=g.stdSize,s=g.category,u=g.effect,l||(l=e.randomService()),r=i.defineBaseUrl(l),i.supportsEffect(l)&&!i.supportsEffectFullForm(l)&&(i.isBeerholdit(l)||(u?("grayscale"==u&&(r+="g/"),i.supportsCrayEffect(l)&&"crazy"==u&&(r+="c/"),i.supportsGifEffect(l)&&"gif"==u&&(r+="gif/"),i.supportsMustangEffect(l)&&"mustang"==u&&(r+="5.0/")):i.isPlaceKitten(l)&&(r+="g/"))),i.supportsSizeParam(l)?e.isValidSize(a,l)?i.isPipsum(l)?(a=a.toLowerCase(),r+=a.indexOf("x")>0?a:a+"x"+a):r+=a:p||(r+=n?"250x250":i.isPipsum(l)?"250x250":250):e.isValidSize(a,l)?(a=a.toLowerCase(),r+=a.indexOf("x")>0?a.replace("x","/"):a+"/"+a):r+="250/250",c||o){var d=e.isValidHexColor(c);i.supportsSkullColor(l)?r+="/"+c.replace("#",""):(i.supportsBgColor(l)&&d&&(r+="/"+c.replace("#","")),i.supportsTextColor(l)&&e.isValidHexColor(o)&&(d||(r+="/333"),r+="/"+o.replace("#","")))}i.supportsFormat(l)&&(e.isFormatAllowed(t)?r+="."+t:p||(r+=".png")),"dummyimage"===l&&p&&(r+="/"+p),i.supportsCategory(l)&&s&&(e.isNumeric(s)?(c||(r+="/03A9F4"),r+=e.isNumberInRange(s,1,45)?"/"+s:"/9"):r+="/"+s),i.supportsEffectFullForm(l)&&u&&(s||(r+="/any"),r+="/"+u+"/"),i.supportsText(l)&&n&&(i.supportsQueryText(l)?(n=e.formatText(n,"+",!0),r+=i.needAmbersand(l)?"&":"?",r+="text="+n):(n=e.formatText(n," ",!1),s||(r+="/sports"),r+="/"+n)),i.isBeerholdit(l)&&(u?(u=u.toLowerCase(),"grayscale"==u?r+="/g":"sepia"==u?r+="/s":"negate"==u&&(r+="/n")):r+="/"),m.imgUrl=r}}}]).factory("RulesEngine",[function(){var e={supportsBgColor:function(e){var i=!0,r=["fpoimg","lorempixel","fillmurray","stevensegallery","placecage","placekitten","placebear","nicenicejpg","baconmockup","pipsum","placesheen"];return r.join("_").indexOf(e)>=0?!1:i},supportsTextColor:function(e){var i=!0,r=["fpoimg","lorempixel","fillmurray","stevensegallery","placecage","placekitten","placebear","nicenicejpg","baconmockup","pipsum","placesheen"];return r.join("_").indexOf(e)>=0?!1:i},supportsFormat:function(e){var i=!0,r=["fpoimg","lorempixel","placeimg","fillmurray","stevensegallery","placecage","placekitten","placebear","nicenicejpg","baconmockup","placesheen","placeskull","beerholdit","fakeimgpl"];return r.join("_").indexOf(e)>=0?!1:i},supportsSizeParam:function(e){var i=!0,r=["lorempixel","placeimg","fillmurray","stevensegallery","placecage","placekitten","placebear","nicenicejpg","baconmockup","placesheen","placeskull","beerholdit"];return r.join("_").indexOf(e)>=0?!1:i},supportsText:function(e){var i=!0,r=["fillmurray","stevensegallery","placecage","placekitten","placebear","nicenicejpg","baconmockup","pipsum","placesheen"];return r.join("_").indexOf(e)>=0?!1:i},supportsQueryText:function(e){var i=!0,r=["lorempixel","fillmurray","stevensegallery","placecage","placekitten","placebear","nicenicejpg","baconmockup","pipsum","placesheen"];return r.join("_").indexOf(e)>=0?!1:i},supportsCategory:function(e){var i=!1,r=["lorempixel","placeimg","fillmurray","stevensegallery","placecage","placekitten","placebear","nicenicejpg","placeskull","fakeimg"];return r.join("_").indexOf(e)>=0?!0:i},supportsEffect:function(e){var i=!1,r=["lorempixel","placeimg","fillmurray","stevensegallery","placecage","placekitten","placebear","nicenicejpg","beerholdit"];return r.join("_").indexOf(e)>=0?!0:i},supportsCrayEffect:function(e){var i=!1,r=["placecage"];return r.join("_").indexOf(e)>=0?!0:i},supportsGifEffect:function(e){var i=!1,r=["placecage"];return r.join("_").indexOf(e)>=0?!0:i},supportsMustangEffect:function(e){var i=!1,r=["nicenicejpg"];return r.join("_").indexOf(e)>=0?!0:i},supportsEffectFullForm:function(e){var i=!1,r=["placeimg"];return r.join("_").indexOf(e)>=0?!0:i},supportsSkullColor:function(e){var i=!1,r=["placeskull"];return r.join("_").indexOf(e)>=0?!0:i},needAmbersand:function(e){var i=!0,r=["fpoimg","fakeimgpl"];return r.join("_").indexOf(e)>=0?!1:i},isPlaceKitten:function(e){return"placekitten"==e},isPipsum:function(e){return"pipsum"==e},isBeerholdit:function(e){return"beerholdit"==e},defineBaseUrl:function(e){var i="//dummyimage.com/";return"placeholdit"===e?i="//placehold.it/":"lorempixel"===e?i="//lorempixel.com/":"fpoimg"===e?i="//fpoimg.com/":"placeimg"===e?i="//placeimg.com/":"fillmurray"===e?i="//fillmurray.com/":"placecage"===e?i="//placecage.com/":"placekitten"===e?i="//placekitten.com/":"stevensegallery"===e?i="//stevensegallery.com/":"nicenicejpg"===e?i="//nicenicejpg.com/":"placebear"===e?i="//placebear.com/":"baconmockup"===e?i="//baconmockup.com/":"placesheen"===e?i="//placesheen.com/":"placeskull"===e?i="//placeskull.com/":"pipsum"===e?i="//pipsum.com/":"beerholdit"===e?i="//beerhold.it/":"beerholdit"===e?i="//beerhold.it/":"fakeimgpl"===e&&(i="//fakeimg.pl/"),i}};return e}]).factory("Utils",[function(){var e={services:["dummyimage","placehold","lorempixel","fpoimg","placeimg","fillmurray","stevensegallery","placecage","placekitten","placebear","stevensegallery","nicenicejpg","placebear","baconmockup","pipsum","placesheen","placeskull","pipsum","beerhold","placeholdnet","fakeimg"],randomService:function(){return this.services[Math.floor(Math.random()*this.services.length)]},formatText:function(e,i,r){if(e&&i){if(e=e.trim(),!r){var l=Math.random().toString(36).substring(7);e=e.replace(new RegExp("-","g"),l),e=e.replace(/[^a-zA-Z0-9 ]/g,""),e=e.replace(new RegExp(l,"g"),"-")}return e.length>0?this.encodeChars(e).replace(/ /g,i):""}},encodeChars:function(e){return e?(e=e.replace(/\+/g,"0x2B"),e=e.replace(/#/g,"0x23"),e=e.replace(/%/g,"0x25"),e=e.replace(/&/g,"0x26")):void 0},isValidSize:function(i,r){if(i){if(i.indexOf("x")>0){var l=i.split("x"),t=l[0],a=l[1];return"dummyimage"===r?e.isValidRatio(t)&&this.isNumeric(a)?!0:e.isValidRatio(a)&&this.isNumeric(t)?!0:this.isNumeric(a)&&this.isNumeric(t)?!0:!1:this.isNumeric(a)&&this.isNumeric(t)?!0:!1}return this.isNumeric(i)?!0:!1}},isValidRatio:function(e){if(e){e=e.split(":");var i=e[0],r=e[1];return this.isNumeric(i)&&this.isNumeric(r)?!0:!1}},isFormatAllowed:function(e){if(e){var i=["png","gif","jpg","jpeg"];return i.join("").indexOf(e)>0}},isValidHexColor:function(e){return e?(e.indexOf("#")<0&&(e="#"+e),/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)):void 0},isNumeric:function(e){return e?!isNaN(e):void 0},isNumberInRange:function(e,i,r){return this.isNumeric(e)&&e>=i&&r>=e?!0:!1}};return e}]);